<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Past Questions Admin | LSS – JABU</title>

  <!-- Standalone: NO styles.css -->
  <link rel="icon" type="image/jpg" href="../images/logo.jpg" />

  <style>
    :root{
      /* Core palette (same family as pastquestions page) */
      --bg0:#050913;
      --bg1:#070b16;
      --bg2:#0b1020;

      --card: rgba(255,255,255,.045);
      --card2: rgba(255,255,255,.06);
      --border: rgba(255,255,255,.10);
      --border2: rgba(255,255,255,.14);

      --text:#eaf0ff;
      --muted: rgba(234,240,255,.72);
      --muted2: rgba(234,240,255,.56);

      --teal:#23B5A8;
      --tealA: rgba(35,181,168,.16);
      --tealB: rgba(35,181,168,.28);

      --danger:#ef4444;
      --dangerA: rgba(239,68,68,.16);

      --warn:#f59e0b;
      --warnA: rgba(245,158,11,.14);

      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --shadow2: 0 10px 30px rgba(0,0,0,.28);

      --radius: 18px;
      --radius2: 24px;

      --max: 1200px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(900px 520px at 20% 0%, rgba(35,181,168,.18), transparent 60%),
        radial-gradient(900px 520px at 80% 0%, rgba(59,130,246,.14), transparent 62%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    /* ---------- Header ---------- */
    .site-header{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(7,11,22,.75);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .container{
      max-width: var(--max);
      margin: 0 auto;
      padding: 12px 16px;
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 220px;
    }
    .brand a{
      display:flex;
      align-items:center;
      gap: 12px;
      color: inherit;
      text-decoration:none;
    }
    .brand img{
      width:44px;
      height:44px;
      border-radius: 999px;
      object-fit: cover;
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
      flex-shrink:0;
    }
    .brand .t1{
      font-weight: 800;
      letter-spacing:.08em;
      text-transform: uppercase;
      font-size: 13px;
      line-height: 1.1;
      opacity: .95;
    }
    .brand .t2{
      font-size: 11px;
      color: var(--muted2);
      letter-spacing:.06em;
      text-transform: uppercase;
      margin-top: 2px;
    }

    .navlinks{
      display:flex;
      align-items:center;
      gap: 18px;
      list-style:none;
      margin:0;
      padding:0;
    }
    .navlinks a{
      color: rgba(234,240,255,.82);
      text-decoration:none;
      font-weight: 700;
      font-size: 14px;
      padding: 10px 10px;
      border-radius: 12px;
    }
    .navlinks a:hover{
      background: rgba(255,255,255,.06);
      color: var(--text);
    }

    .nav-toggle{
      display:none;
      width: 44px;
      height: 44px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      cursor:pointer;
    }
    .nav-toggle span{
      display:block;
      height:2px;
      width:20px;
      margin: 5px auto;
      background: rgba(234,240,255,.86);
      border-radius: 999px;
    }

    @media (max-width: 860px){
      .brand .t2{ display:none; }
      .nav-toggle{ display:inline-block; }
      .navlinks{
        display:none;
        position:absolute;
        right: 16px;
        top: 68px;
        width: min(320px, calc(100vw - 32px));
        flex-direction: column;
        gap: 6px;
        padding: 10px;
        background: rgba(7,11,22,.92);
        border: 1px solid rgba(255,255,255,.10);
        border-radius: 18px;
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
      }
      .navlinks.open{ display:flex; }
      .navlinks a{ width:100%; }
    }

    /* ---------- Page layout ---------- */
    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 20px 16px 70px;
    }

    .hero{
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(780px 360px at 18% 10%, rgba(35,181,168,.18), transparent 60%),
        radial-gradient(780px 360px at 82% 0%, rgba(59,130,246,.14), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      padding: 18px;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(234,240,255,.78);
      font-size: 12px;
      letter-spacing: .10em;
      text-transform: uppercase;
    }
    .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--teal);
      box-shadow: 0 0 0 6px rgba(35,181,168,.12);
    }

    h1{
      margin: 12px 0 6px;
      font-size: 28px;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }
    .sub{
      margin:0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
      max-width: 90ch;
    }

    .cta{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      margin-top: 14px;
    }

    .grid{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 12px;
      align-items: start;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow2);
      padding: 14px;
      overflow:hidden;
    }

    .card h2{
      margin: 0 0 6px;
      font-size: 15px;
      letter-spacing: -0.01em;
    }
    .hint{
      margin:0;
      color: var(--muted2);
      font-size: 12px;
      line-height: 1.55;
    }

    .row{
      margin-top: 12px;
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 10px;
    }

    .field{
      grid-column: span 12;
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 10px 10px;
      border-radius: 14px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
      min-height: 46px;
    }
    .field label{
      min-width: 96px;
      font-size: 12px;
      color: rgba(234,240,255,.68);
      white-space: nowrap;
    }
    .field input, .field select, .field textarea{
      width:100%;
      border:none;
      outline:none;
      background: transparent;
      color: var(--text);
      font: inherit;
      font-size: 13px;
    }
    .field textarea{
      resize: vertical;
      min-height: 46px;
      padding-top: 2px;
    }
    .field:focus-within{
      border-color: rgba(35,181,168,.45);
      box-shadow: 0 0 0 4px rgba(35,181,168,.10);
    }

    .col6{ grid-column: span 6; }
    .col4{ grid-column: span 4; }
    .col8{ grid-column: span 8; }
    @media (max-width: 760px){
      .col6,.col4,.col8{ grid-column: span 12; }
      .field label{ min-width: 86px; }
    }

    /* ---------- Buttons ---------- */
    .btnx{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 11px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(234,240,255,.92);
      text-decoration:none;
      font-weight: 800;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .btnx:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.18);
    }
    .btnx:active{ transform: translateY(0px); }

    .btnx.primary{
      background: rgba(35,181,168,.14);
      border-color: rgba(35,181,168,.32);
      color: #dffdf9;
    }
    .btnx.primary:hover{
      background: rgba(35,181,168,.20);
      border-color: rgba(35,181,168,.42);
    }

    .btnx.ghost{
      background: rgba(255,255,255,.04);
      border-color: rgba(255,255,255,.10);
      color: rgba(234,240,255,.82);
    }

    .btnx.danger{
      background: rgba(239,68,68,.12);
      border-color: rgba(239,68,68,.28);
      color: rgba(255,220,220,.95);
    }
    .btnx.danger:hover{
      background: rgba(239,68,68,.18);
      border-color: rgba(239,68,68,.36);
    }

    /* ---------- Mini pills / previews ---------- */
    .mini{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      margin-top: 10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(234,240,255,.80);
      font-size: 12px;
    }
    .badge2{
      width:9px;
      height:9px;
      border-radius: 999px;
      background: var(--teal);
      box-shadow: 0 0 0 6px rgba(35,181,168,.12);
    }

    /* ---------- Table ---------- */
    .sep{
      height: 1px;
      background: rgba(255,255,255,.10);
      margin: 12px 0;
    }

    table{
      width:100%;
      border-collapse: collapse;
      margin-top: 10px;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    th, td{
      text-align:left;
      padding: 10px 10px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      font-size: 12px;
      vertical-align: top;
    }
    th{
      font-size: 11px;
      letter-spacing: .10em;
      text-transform: uppercase;
      color: rgba(234,240,255,.70);
      background: rgba(255,255,255,.04);
    }
    tr:last-child td{ border-bottom:none; }

    .tag{
      display:inline-flex;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      font-size: 11px;
      color: rgba(234,240,255,.70);
      margin-right: 6px;
      margin-top: 4px;
    }
    .tag.good{
      border-color: rgba(35,181,168,.30);
      background: rgba(35,181,168,.12);
      color: rgba(223,253,249,.92);
    }
    .tag.warn{
      border-color: rgba(245,158,11,.28);
      background: rgba(245,158,11,.12);
      color: rgba(255,236,196,.92);
    }

    /* ---------- Toast + warning box ---------- */
    .toast{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(35,181,168,.22);
      background: rgba(35,181,168,.10);
      color: rgba(223,253,249,.94);
      font-size: 12px;
      line-height: 1.55;
      display:none;
    }
    .toast.show{ display:block; }

    .warnbox{
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(245,158,11,.22);
      background: rgba(245,158,11,.10);
      color: rgba(255,236,196,.92);
      font-size: 12px;
      line-height: 1.55;
    }

    code{
      background: rgba(255,255,255,.08);
      padding: 2px 6px;
      border-radius: 8px;
      color: rgba(234,240,255,.92);
    }

    /* Footer */
    .footer{
      margin-top: 18px;
      color: rgba(234,240,255,.55);
      font-size: 12px;
      text-align:center;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <div class="nav">
        <div class="brand">
          <a href="../index.html" title="Back to Home">
            <img src="../images/logo.jpg" alt="LSS Logo" />
            <div>
              <div class="t1">Law Students’ Society</div>
              <div class="t2">Joseph Ayo Babalola University</div>
            </div>
          </a>
        </div>

        <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
          <span></span><span></span><span></span>
        </button>

        <ul class="navlinks" id="navLinks">
          <li><a href="../index.html">Home</a></li>
          <li><a href="../resources.html">Resources</a></li>
          <li><a href="pastquestions.html">Past Questions</a></li>
          <li><a href="../contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="badge"><span class="dot"></span> Past Questions Admin • Local Draft Builder</div>
      <h1>Build resources.json without stress</h1>
      <p class="sub">
        Add a past question’s metadata here and export a clean <code>resources.json</code>.
        Since this is a static site, you’ll still upload the actual files into <code>/pastquestions/all/</code> using your normal method.
      </p>

      <div class="cta">
        <a class="btnx primary" href="pastquestions.html">Open Past Questions</a>
        <a class="btnx ghost" href="../resources.html">Back to Resources</a>
        <button class="btnx" id="btnLoadLive">Load live /pastquestions/resources.json</button>
      </div>

      <div class="toast" id="toast"></div>
    </section>
    <section class="card" id="authCard" style="margin-top:18px">
      <div class="card-h">
        <div>
          <div class="card-title">Admin Login</div>
          <div class="card-sub">Only admins can upload/edit. Public users can still view past questions.</div>
        </div>
        <div class="actions">
          <span class="pill" id="authStatus">Not signed in</span>
        </div>
      </div>

      <div class="grid2" style="margin-top:12px">
        <label class="field">
          <span class="lbl">Email</span>
          <input id="loginEmail" type="email" placeholder="admin@jabulss.com" autocomplete="username" />
        </label>

        <label class="field">
          <span class="lbl">Password</span>
          <input id="loginPassword" type="password" placeholder="••••••••" autocomplete="current-password" />
        </label>
      </div>

      <div class="actions" style="margin-top:12px; justify-content:flex-end">
        <button class="btn" id="btnLogout" type="button" disabled>Logout</button>
        <button class="btn primary" id="btnLogin" type="button">Login</button>
      </div>
    </section>


    <section class="grid">
      <!-- Left -->
      <div class="card">
        <h2>Add a new past question</h2>
        <p class="hint">Choose file → Auto-detect (optional) → Add to Draft → Export resources.json</p>

        <div class="row">
          <div class="field col8">
            <label for="file">File</label>
            <input id="file" type="file" accept=".pdf,.png,.jpg,.jpeg,.webp" />
          </div>

          <div class="field col4">
            <label for="safeName">Save as</label>
            <input id="safeName" placeholder="auto safe filename" />
          </div>

          <div class="field col6">
            <label for="level">Level</label>
            <select id="level">
              <option value="UNSORTED">UNSORTED</option>
              <option>100L</option><option>200L</option><option>300L</option><option>400L</option><option>500L</option>
            </select>
          </div>

          <div class="field col6">
            <label for="semester">Semester</label>
            <select id="semester">
              <option value="UNSORTED">UNSORTED</option>
              <option value="First">First</option>
              <option value="Second">Second</option>
            </select>
          </div>

          <div class="field col6">
            <label for="type">Type</label>
            <select id="type">
              <option value="UNKNOWN">UNKNOWN</option>
              <option>Exam</option><option>Test</option><option>Quiz</option>
            </select>
          </div>

          <div class="field col6">
            <label for="session">Session</label>
            <input id="session" placeholder="e.g., 2023/2024" />
          </div>

          <div class="field col6">
            <label for="courseCode">Course</label>
            <input id="courseCode" placeholder="e.g., LAW 201" />
          </div>

          <div class="field col6">
            <label for="courseTitle">Title</label>
            <input id="courseTitle" placeholder="e.g., Constitutional Law" />
          </div>

          <div class="field">
            <label for="title">Display</label>
            <input id="title" placeholder="What users see (auto-filled if possible)" />
          </div>

          <div class="field">
            <label for="notes">Notes</label>
            <textarea id="notes" placeholder="Optional notes…"></textarea>
          </div>
        </div>

        <div class="mini">
          <span class="pill"><span class="badge2"></span> URL: <code id="urlPreview">/pastquestions/all/…</code></span>
          <span class="pill">ID: <code id="idPreview">—</code></span>
        </div>

        <div class="cta" style="margin-top:12px;">
          <button class="btnx" id="btnAuto">Auto-detect</button>
          <button class="btnx primary" id="btnAdd">Add to Draft</button>
          <button class="btnx primary" id="btnUpload">Upload & Publish</button>
          <button class="btnx danger" id="btnReset">Reset</button>
        </div>

        <div class="warnbox">
          With Firebase: click <b>Upload & Publish</b> — the file goes to Firebase Storage and metadata goes to Firestore. Your past questions page updates automatically.
        </div>
      </div>

      <!-- Right -->
      <div class="card">
        <h2>Draft Library (local)</h2>
        <p class="hint">Saved in your browser (localStorage). Import/merge existing JSON anytime.</p>

        <div class="cta" style="margin-top:12px;">
          <button class="btnx" id="btnImportFile">Import JSON (Draft)</button>
          <button class="btnx" id="btnImportFirestore">Publish draft → Database</button>
          <input id="importFile" type="file" accept="application/json" style="display:none" />
          <button class="btnx primary" id="btnExport">Export resources.json</button>
          <button class="btnx danger" id="btnClearDraft">Clear Draft</button>
        </div>

        <div class="sep"></div>

        <div class="mini">
          <span class="pill">Total: <b id="countTotal">0</b></span>
          <span class="pill">Unsorted: <b id="countUnsorted">0</b></span>
        </div>

        <table aria-label="Draft items">
          <thead>
            <tr>
              <th>Title</th>
              <th>Tags</th>
              <th>File</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>

        <div class="warnbox" style="margin-top:12px;">
          Tip: avoid spaces. Safe filenames are best (underscores).
        </div>
      </div>
    </section>

    <div class="footer">
      © <span id="year"></span> Law Students’ Society, Joseph Ayo Babalola University.
    </div>
  </main>

  <!-- Keep your existing logic -->
  <script type="module" src="admin.js"></script>

  <!-- Tiny helpers for nav + year (no dependency on main.js) -->
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
    const t = document.getElementById("navToggle");
    const links = document.getElementById("navLinks");
    t?.addEventListener("click", () => links.classList.toggle("open"));
  </script>
</body>
</html>
