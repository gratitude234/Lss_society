<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Past Questions Admin | LSS – JABU</title>

  <!-- Pastquestions folder: /pastquestions/admin.html -->
  <link rel="icon" type="image/jpg" href="../images/logo.jpg" />

  <style>
    :root{
      --bg0:#050913;
      --bg1:#070b16;
      --bg2:#0b1020;

      --card: rgba(255,255,255,.045);
      --card2: rgba(255,255,255,.06);
      --border: rgba(255,255,255,.10);
      --border2: rgba(255,255,255,.14);

      --text:#eaf0ff;
      --muted: rgba(234,240,255,.72);
      --muted2: rgba(234,240,255,.56);

      --teal:#23B5A8;
      --tealA: rgba(35,181,168,.16);
      --tealB: rgba(35,181,168,.28);

      --danger:#ef4444;
      --dangerA: rgba(239,68,68,.14);

      --warn:#f59e0b;
      --warnA: rgba(245,158,11,.14);

      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --shadow2: 0 10px 30px rgba(0,0,0,.28);

      --radius: 18px;
      --radius2: 24px;
      --max: 1200px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(900px 520px at 20% 0%, rgba(35,181,168,.18), transparent 60%),
        radial-gradient(900px 520px at 80% 0%, rgba(59,130,246,.14), transparent 62%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    /* Header */
    .site-header{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(7,11,22,.75);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .container{
      max-width: var(--max);
      margin: 0 auto;
      padding: 12px 16px;
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      position: relative;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 220px;
    }
    .brand a{
      display:flex;
      align-items:center;
      gap: 12px;
      color: inherit;
      text-decoration:none;
    }
    .brand img{
      width:44px;
      height:44px;
      border-radius: 999px;
      object-fit: cover;
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
      flex-shrink:0;
    }
    .brand .t1{
      font-weight: 800;
      letter-spacing:.08em;
      text-transform: uppercase;
      font-size: 13px;
      line-height: 1.1;
      opacity: .95;
    }
    .brand .t2{
      font-size: 11px;
      color: var(--muted2);
      letter-spacing:.06em;
      text-transform: uppercase;
      margin-top: 2px;
    }

    .navlinks{
      display:flex;
      align-items:center;
      gap: 18px;
      list-style:none;
      margin:0;
      padding:0;
    }
    .navlinks a{
      color: rgba(234,240,255,.82);
      text-decoration:none;
      font-weight: 700;
      font-size: 14px;
      padding: 10px 10px;
      border-radius: 12px;
    }
    .navlinks a:hover{
      background: rgba(255,255,255,.06);
      color: var(--text);
    }
    .nav-toggle{
      display:none;
      width: 44px;
      height: 44px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      cursor:pointer;
    }
    .nav-toggle span{
      display:block;
      height:2px;
      width:20px;
      margin: 5px auto;
      background: rgba(234,240,255,.86);
      border-radius: 999px;
    }
    @media (max-width: 860px){
      .brand .t2{ display:none; }
      .nav-toggle{ display:inline-block; }
      .navlinks{
        display:none;
        position:absolute;
        right: 16px;
        top: 68px;
        width: min(320px, calc(100vw - 32px));
        flex-direction: column;
        gap: 6px;
        padding: 10px;
        background: rgba(7,11,22,.92);
        border: 1px solid rgba(255,255,255,.10);
        border-radius: 18px;
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
      }
      .navlinks.open{ display:flex; }
      .navlinks a{ width:100%; }
    }

    /* Layout */
    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 20px 16px 70px;
    }

    .hero{
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(780px 360px at 18% 10%, rgba(35,181,168,.18), transparent 60%),
        radial-gradient(780px 360px at 82% 0%, rgba(59,130,246,.14), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      padding: 18px;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(234,240,255,.78);
      font-size: 12px;
      letter-spacing: .10em;
      text-transform: uppercase;
    }
    .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--teal);
      box-shadow: 0 0 0 6px rgba(35,181,168,.12);
    }

    h1{
      margin: 12px 0 6px;
      font-size: 28px;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }
    .sub{
      margin:0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
      max-width: 90ch;
    }

    .grid{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 12px;
      align-items: start;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow2);
      padding: 14px;
      overflow:hidden;
    }
    .card h2{
      margin: 0 0 6px;
      font-size: 15px;
      letter-spacing: -0.01em;
    }
    .hint{
      margin:0;
      color: var(--muted2);
      font-size: 12px;
      line-height: 1.55;
    }

    /* Form grid */
    .row{
      margin-top: 12px;
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 10px;
    }
    .col12{ grid-column: span 12; }
    .col8{ grid-column: span 8; }
    .col6{ grid-column: span 6; }
    .col4{ grid-column: span 4; }
    @media (max-width: 760px){
      .col8,.col6,.col4{ grid-column: span 12; }
    }

    .field{
      grid-column: span 12;
      display:flex;
      flex-direction: column;
      gap: 6px;
      padding: 10px 10px;
      border-radius: 14px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
    }
    .field .lbl{
      font-size: 12px;
      color: rgba(234,240,255,.68);
      letter-spacing: .02em;
    }
    .field input, .field select, .field textarea{
      width:100%;
      border:none;
      outline:none;
      background: transparent;
      color: var(--text);
      font: inherit;
      font-size: 13px;
    }
    .field textarea{
      resize: vertical;
      min-height: 70px;
    }
    .field:focus-within{
      border-color: rgba(35,181,168,.45);
      box-shadow: 0 0 0 4px rgba(35,181,168,.10);
    }

    /* Buttons */
    .cta{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      margin-top: 12px;
    }
    .btnx{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 11px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(234,240,255,.92);
      text-decoration:none;
      font-weight: 800;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .btnx:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.18);
    }
    .btnx:active{ transform: translateY(0px); }
    .btnx[disabled]{ opacity:.55; cursor:not-allowed; transform:none; }

    .btnx.primary{
      background: rgba(35,181,168,.14);
      border-color: rgba(35,181,168,.32);
      color: #dffdf9;
    }
    .btnx.primary:hover{
      background: rgba(35,181,168,.20);
      border-color: rgba(35,181,168,.42);
    }
    .btnx.ghost{
      background: rgba(255,255,255,.04);
      border-color: rgba(255,255,255,.10);
      color: rgba(234,240,255,.82);
    }
    .btnx.danger{
      background: rgba(239,68,68,.12);
      border-color: rgba(239,68,68,.28);
      color: rgba(255,220,220,.95);
    }
    .btnx.danger:hover{
      background: rgba(239,68,68,.18);
      border-color: rgba(239,68,68,.36);
    }

    /* Pills, toast */
    .mini{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      margin-top: 10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(234,240,255,.80);
      font-size: 12px;
    }
    .badge2{
      width:9px;
      height:9px;
      border-radius: 999px;
      background: var(--teal);
      box-shadow: 0 0 0 6px rgba(35,181,168,.12);
    }
    .toast{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      color: rgba(234,240,255,.92);
      font-size: 12px;
      line-height: 1.55;
      display:none;
    }
    .toast.show{ display:block; }
    .toast.ok{ border-color: rgba(35,181,168,.25); background: rgba(35,181,168,.10); color: rgba(223,253,249,.94); }
    .toast.warn{ border-color: rgba(245,158,11,.25); background: rgba(245,158,11,.10); color: rgba(255,236,196,.94); }
    .toast.bad{ border-color: rgba(239,68,68,.25); background: rgba(239,68,68,.10); color: rgba(255,220,220,.94); }

    .warnbox{
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(245,158,11,.22);
      background: rgba(245,158,11,.10);
      color: rgba(255,236,196,.92);
      font-size: 12px;
      line-height: 1.55;
    }
    code{
      background: rgba(255,255,255,.08);
      padding: 2px 6px;
      border-radius: 8px;
      color: rgba(234,240,255,.92);
    }

    /* Table */
    .sep{
      height: 1px;
      background: rgba(255,255,255,.10);
      margin: 12px 0;
    }
    table{
      width:100%;
      border-collapse: collapse;
      margin-top: 10px;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    th, td{
      text-align:left;
      padding: 10px 10px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      font-size: 12px;
      vertical-align: top;
    }
    th{
      font-size: 11px;
      letter-spacing: .10em;
      text-transform: uppercase;
      color: rgba(234,240,255,.70);
      background: rgba(255,255,255,.04);
    }
    tr:last-child td{ border-bottom:none; }

    .tag{
      display:inline-flex;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      font-size: 11px;
      color: rgba(234,240,255,.70);
      margin-right: 6px;
      margin-top: 4px;
    }
    .tag.good{ border-color: rgba(35,181,168,.30); background: rgba(35,181,168,.12); color: rgba(223,253,249,.92); }
    .tag.warn{ border-color: rgba(245,158,11,.28); background: rgba(245,158,11,.12); color: rgba(255,236,196,.92); }

    .right{ text-align:right; }
    .mono{ font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; }

    .footer{
      margin-top: 18px;
      color: rgba(234,240,255,.55);
      font-size: 12px;
      text-align:center;
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container">
      <div class="nav">
        <div class="brand">
          <a href="../index.html" title="Back to Home">
            <img src="../images/logo.jpg" alt="LSS Logo" />
            <div>
              <div class="t1">Law Students’ Society</div>
              <div class="t2">Joseph Ayo Babalola University</div>
            </div>
          </a>
        </div>

        <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
          <span></span><span></span><span></span>
        </button>

        <ul class="navlinks" id="navLinks">
          <li><a href="../index.html">Home</a></li>
          <li><a href="../resources.html">Resources</a></li>
          <li><a href="pastquestions.html">Past Questions</a></li>
          <li><a href="../contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="badge"><span class="dot"></span> Past Questions Admin • Upload + Database</div>
      <h1>Upload past questions (properly)</h1>
      <p class="sub">
        Login as admin → upload file → metadata gets saved into your database via the Truehost API
        (<code>jabumarket.com.ng/lss_api</code>).
      </p>

      <div class="cta">
        <a class="btnx primary" href="pastquestions.html">Open Past Questions</a>
        <a class="btnx ghost" href="../resources.html">Back to Resources</a>
        <button class="btnx" id="btnLoadLive" type="button">Load Live Library</button>
      </div>

      <div class="toast" id="toast"></div>
    </section>

    <!-- AUTH -->
    <section class="card" style="margin-top:18px">
      <h2>Admin Login</h2>
      <p class="hint">Only admins can upload/publish. Public users can still view.</p>

      <div class="mini">
        <span class="pill" id="authStatus"><span class="badge2"></span> Not signed in</span>
      </div>

      <div class="row">
        <label class="field col6">
          <span class="lbl">Email</span>
          <input id="loginEmail" type="email" placeholder="admin@jabulss.com" autocomplete="username" />
        </label>

        <label class="field col6">
          <span class="lbl">Password</span>
          <input id="loginPassword" type="password" placeholder="••••••••" autocomplete="current-password" />
        </label>
      </div>

      <div class="cta" style="justify-content:flex-end">
        <button class="btnx ghost" id="btnLogout" type="button" disabled>Logout</button>
        <button class="btnx primary" id="btnLogin" type="button">Login</button>
      </div>
    </section>

    <section class="grid">
      <!-- LEFT: Upload -->
      <div class="card">
        <h2>Upload a new past question</h2>
        <p class="hint">Choose file → fill metadata → Upload & Publish</p>

        <div class="row">
          <label class="field col8">
            <span class="lbl">File (PDF / Image)</span>
            <input id="file" type="file" accept=".pdf,.png,.jpg,.jpeg,.webp" />
          </label>

          <label class="field col4">
            <span class="lbl">Save As (safe_name)</span>
            <input id="safeName" placeholder="auto-generated" />
          </label>

          <label class="field col6">
            <span class="lbl">Level</span>
            <select id="level">
              <option value="UNSORTED">UNSORTED</option>
              <option>100L</option><option>200L</option><option>300L</option><option>400L</option><option>500L</option>
            </select>
          </label>

          <label class="field col6">
            <span class="lbl">Semester</span>
            <select id="semester">
              <option value="UNSORTED">UNSORTED</option>
              <option value="First">First</option>
              <option value="Second">Second</option>
            </select>
          </label>

          <label class="field col6">
            <span class="lbl">Type</span>
            <select id="type">
              <option value="Exam">Exam</option>
              <option value="Test">Test</option>
              <option value="Quiz">Quiz</option>
            </select>
          </label>

          <label class="field col6">
            <span class="lbl">Session</span>
            <input id="session" placeholder="e.g., 2023/2024" />
          </label>

          <label class="field col6">
            <span class="lbl">Year (optional)</span>
            <input id="yearInput" placeholder="e.g., 2024" inputmode="numeric" />
          </label>

          <label class="field col6">
            <span class="lbl">Course Code</span>
            <input id="courseCode" placeholder="e.g., LAW 201" />
          </label>

          <label class="field col12">
            <span class="lbl">Course Title</span>
            <input id="courseTitle" placeholder="e.g., Constitutional Law" />
          </label>

          <label class="field col12">
            <span class="lbl">Display Title (what users see)</span>
            <input id="title" placeholder="Auto-filled from filename if empty" />
          </label>

          <label class="field col12">
            <span class="lbl">Notes (optional)</span>
            <textarea id="notes" placeholder="Optional notes…"></textarea>
          </label>
        </div>

        <div class="mini">
          <span class="pill"><span class="badge2"></span> URL: <code id="urlPreview">—</code></span>
          <span class="pill">ID: <code id="idPreview">—</code></span>
        </div>

        <div class="cta">
          <button class="btnx" id="btnAuto" type="button">Auto-detect</button>
          <button class="btnx" id="btnAdd" type="button">Add to Draft</button>
          <button class="btnx primary" id="btnUpload" type="button">Upload & Publish</button>
          <button class="btnx danger" id="btnReset" type="button">Reset</button>
        </div>

        <div class="warnbox">
          “Upload & Publish” sends the file + metadata to your Truehost API. Your Past Questions page loads from the DB.
        </div>
      </div>

      <!-- RIGHT: Library -->
      <div class="card">
        <h2>Library (Draft + Live)</h2>
        <p class="hint">Draft is saved in your browser. You can import/export JSON too.</p>

        <div class="row">
          <label class="field col12">
            <span class="lbl">Search library</span>
            <input id="search" placeholder="Search by title/course/session/level…" />
          </label>
        </div>

        <div class="cta">
          <button class="btnx" id="btnPickImport" type="button">Import JSON</button>
          <input id="importFile" type="file" accept="application/json" style="display:none" />

          <button class="btnx" id="btnImportFirestore" type="button">Publish Draft → Database</button>
          <button class="btnx primary" id="btnExport" type="button">Export JSON</button>
          <button class="btnx danger" id="btnClearDraft" type="button">Clear Draft</button>
        </div>

        <div class="sep"></div>

        <div class="mini">
          <span class="pill">Total: <b id="countTotal">0</b></span>
          <span class="pill">Unsorted: <b id="countUnsorted">0</b></span>
        </div>

        <table aria-label="Past questions library">
          <thead>
            <tr>
              <th>Title</th>
              <th>Meta</th>
              <th>File</th>
              <th class="right">Actions</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>

        <div class="warnbox" style="margin-top:12px;">
          Tip: use safe filenames (no weird characters). “Auto-detect” helps generate a clean <code>safe_name</code>.
        </div>
      </div>
    </section>

    <div class="footer">
      © <span id="footerYear"></span> Law Students’ Society, Joseph Ayo Babalola University.
    </div>
  </main>

  <script src="admin.js"></script>

  <script>
    document.getElementById("footerYear").textContent = new Date().getFullYear();
    const t = document.getElementById("navToggle");
    const links = document.getElementById("navLinks");
    t?.addEventListener("click", () => links.classList.toggle("open"));
  </script>
</body>
</html>
