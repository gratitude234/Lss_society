<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Past Questions Admin | LSS – JABU</title>

  <link rel="icon" type="image/jpg" href="../images/logo.jpg" />

  <style>
    :root{
      --bg0:#050913;
      --bg1:#070b16;
      --bg2:#0b1020;

      --card: rgba(255,255,255,.045);
      --card2: rgba(255,255,255,.07);
      --border: rgba(255,255,255,.10);
      --border2: rgba(255,255,255,.14);

      --text:#eaf0ff;
      --muted: rgba(234,240,255,.72);
      --muted2: rgba(234,240,255,.56);

      --teal:#23B5A8;
      --tealA: rgba(35,181,168,.16);
      --tealB: rgba(35,181,168,.28);

      --danger:#ef4444;
      --dangerA: rgba(239,68,68,.16);

      --warn:#f59e0b;
      --warnA: rgba(245,158,11,.14);

      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --shadow2: 0 10px 30px rgba(0,0,0,.28);

      --radius: 18px;
      --radius2: 24px;

      --max: 1200px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(900px 520px at 20% 0%, rgba(35,181,168,.18), transparent 60%),
        radial-gradient(900px 520px at 80% 0%, rgba(59,130,246,.14), transparent 62%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    /* Header */
    .site-header{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(7,11,22,.75);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .container{
      max-width: var(--max);
      margin: 0 auto;
      padding: 12px 16px;
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
    }
    .brand a{
      display:flex;
      align-items:center;
      gap: 12px;
      color: inherit;
      text-decoration:none;
    }
    .brand img{
      width:44px;height:44px;border-radius:999px;object-fit:cover;
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
    }
    .brand .t1{
      font-weight: 800;
      letter-spacing:.08em;
      text-transform: uppercase;
      font-size: 13px;
      line-height: 1.1;
      opacity: .95;
    }
    .brand .t2{
      font-size: 11px;
      color: var(--muted2);
      letter-spacing:.06em;
      text-transform: uppercase;
      margin-top: 2px;
    }
    .navlinks{
      display:flex;align-items:center;gap:18px;
      list-style:none;margin:0;padding:0;
    }
    .navlinks a{
      color: rgba(234,240,255,.82);
      text-decoration:none;
      font-weight: 700;
      font-size: 14px;
      padding: 10px 10px;
      border-radius: 12px;
    }
    .navlinks a:hover{ background: rgba(255,255,255,.06); color: var(--text); }
    .nav-toggle{
      display:none;
      width: 44px;height: 44px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      cursor:pointer;
    }
    .nav-toggle span{ display:block;height:2px;width:20px;margin:5px auto;background: rgba(234,240,255,.86);border-radius:999px; }
    @media (max-width: 860px){
      .brand .t2{ display:none; }
      .nav-toggle{ display:inline-block; }
      .navlinks{
        display:none;
        position:absolute;
        right: 16px;
        top: 68px;
        width: min(320px, calc(100vw - 32px));
        flex-direction: column;
        gap: 6px;
        padding: 10px;
        background: rgba(7,11,22,.92);
        border: 1px solid rgba(255,255,255,.10);
        border-radius: 18px;
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
      }
      .navlinks.open{ display:flex; }
      .navlinks a{ width:100%; }
    }

    /* Layout */
    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 20px 16px 70px;
    }
    .hero{
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(780px 360px at 18% 10%, rgba(35,181,168,.18), transparent 60%),
        radial-gradient(780px 360px at 82% 0%, rgba(59,130,246,.14), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      padding: 18px;
    }
    .badge{
      display:inline-flex;align-items:center;gap: 10px;
      padding: 8px 12px;border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(234,240,255,.78);
      font-size: 12px;
      letter-spacing: .10em;
      text-transform: uppercase;
    }
    .dot{ width:10px;height:10px;border-radius:999px;background:var(--teal);box-shadow:0 0 0 6px rgba(35,181,168,.12); }
    h1{ margin: 12px 0 6px; font-size: 28px; letter-spacing: -0.02em; line-height: 1.1; }
    .sub{ margin:0; color: var(--muted); font-size: 13px; line-height: 1.6; max-width: 90ch; }
    .cta{ display:flex; flex-wrap:wrap; gap: 10px; align-items:center; margin-top: 14px; }

    .btn{
      appearance:none;border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(234,240,255,.90);
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 800;
      font-size: 13px;
      cursor:pointer;
      transition: transform .08s ease, background .15s ease, border-color .15s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap: 8px;
    }
    .btn:hover{ background: rgba(255,255,255,.085); border-color: rgba(255,255,255,.18); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(35,181,168,.22), rgba(35,181,168,.12));
      border-color: rgba(35,181,168,.30);
    }
    .btn.danger{
      background: linear-gradient(180deg, rgba(239,68,68,.20), rgba(239,68,68,.10));
      border-color: rgba(239,68,68,.28);
    }
    .btn.ghost{ background: transparent; border-color: rgba(255,255,255,.12); }
    .btn[disabled]{ opacity:.55; cursor:not-allowed; }

    .card{
      margin-top: 16px;
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .card .head{
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    .title{
      font-weight: 900;
      letter-spacing: -0.01em;
    }
    .hint{
      font-size: 12px;
      color: var(--muted2);
      margin-top: 4px;
      line-height: 1.5;
    }
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(234,240,255,.82);
      font-weight: 800;
      font-size: 12px;
      white-space:nowrap;
    }
    .pill.good{ border-color: rgba(35,181,168,.30); background: rgba(35,181,168,.12); }
    .pill.warn{ border-color: rgba(245,158,11,.30); background: rgba(245,158,11,.10); }

    .body{ padding: 16px; }

    .two{
      display:grid;
      grid-template-columns: 420px 1fr;
      gap: 16px;
      margin-top: 16px;
    }
    @media (max-width: 980px){
      .two{ grid-template-columns: 1fr; }
    }

    label{ display:block; }
    .grid2{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 650px){ .grid2{ grid-template-columns: 1fr; } }

    .field .lbl{
      font-weight: 900;
      font-size: 12px;
      color: rgba(234,240,255,.82);
      margin-bottom: 6px;
      display:block;
    }
    input, select, textarea{
      width:100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(7,11,22,.35);
      color: rgba(234,240,255,.92);
      padding: 11px 12px;
      outline: none;
      font-size: 14px;
    }
    textarea{ min-height: 92px; resize: vertical; }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(35,181,168,.35);
      box-shadow: 0 0 0 4px rgba(35,181,168,.12);
    }

    .toolbar{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    .toolbar .left, .toolbar .right{ display:flex; flex-wrap:wrap; gap: 10px; align-items:center; }
    .toolbar .right{ justify-content:flex-end; }

    table{
      width:100%;
      border-collapse: separate;
      border-spacing: 0;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      background: rgba(255,255,255,.03);
    }
    thead th{
      text-align:left;
      font-size: 11px;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: rgba(234,240,255,.64);
      background: rgba(255,255,255,.04);
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    tbody td{
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      vertical-align: top;
      font-size: 13px;
      color: rgba(234,240,255,.86);
    }
    tbody tr:hover td{ background: rgba(255,255,255,.03); }
    tbody tr:last-child td{ border-bottom:none; }

    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; font-size: 12px; color: rgba(234,240,255,.74); }
    .rowTitle{ font-weight: 900; }
    .rowSub{ margin-top: 4px; color: rgba(234,240,255,.62); font-size: 12px; }

    .actions{ display:flex; gap: 8px; flex-wrap:wrap; }
    .miniBtn{
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(234,240,255,.86);
      font-weight: 900;
      font-size: 12px;
      cursor:pointer;
    }
    .miniBtn:hover{ background: rgba(255,255,255,.08); }
    .miniBtn.danger{
      border-color: rgba(239,68,68,.28);
      background: rgba(239,68,68,.10);
    }

    .toast{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(35,181,168,.22);
      background: rgba(35,181,168,.10);
      color: rgba(223,253,249,.94);
      font-size: 12px;
      line-height: 1.55;
      display:none;
    }
    .toast.ok{ border-color: rgba(35,181,168,.22); background: rgba(35,181,168,.10); }
    .toast.warn{ border-color: rgba(245,158,11,.22); background: rgba(245,158,11,.10); color: rgba(255,236,196,.92); }
    .toast.bad{ border-color: rgba(239,68,68,.24); background: rgba(239,68,68,.10); color: rgba(255,225,225,.92); }
    .toast.show{ display:block; }

    .footer{
      margin-top: 18px;
      color: rgba(234,240,255,.55);
      font-size: 12px;
      text-align:center;
    }

    /* Modal */
    .modalOverlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(8px);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 16px;
      z-index: 100;
    }
    .modalOverlay.open{ display:flex; }
    .modal{
      width: min(720px, 100%);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(10,14,28,.92), rgba(10,14,28,.78));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modal .mhead{
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    .modal .mbody{ padding: 16px; }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container">
      <div class="nav">
        <div class="brand">
          <a href="../index.html" title="Back to Home">
            <img src="../images/logo.jpg" alt="LSS Logo" />
            <div>
              <div class="t1">Law Students’ Society</div>
              <div class="t2">Joseph Ayo Babalola University</div>
            </div>
          </a>
        </div>

        <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
          <span></span><span></span><span></span>
        </button>

        <ul class="navlinks" id="navLinks">
          <li><a href="../index.html">Home</a></li>
          <li><a href="../resources.html">Resources</a></li>
          <li><a href="../pastquestions.html">Past Questions</a></li>
          <li><a href="../contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="badge"><span class="dot"></span> Past Questions Admin</div>
      <h1>Upload • Edit • Rename • Delete</h1>
      <p class="sub">
        This page is intentionally minimal. No draft builders, no exports, no extra steps.
        Login once, then manage past questions directly in the database.
      </p>

      <div class="cta">
        <a class="btn ghost" href="../pastquestions.html">Open Past Questions</a>
        <button class="btn" id="btnRefreshTop">Refresh List</button>
      </div>

      <div class="toast" id="toast"></div>
    </section>

    <!-- AUTH -->
    <section class="card" style="margin-top:16px;">
      <div class="head">
        <div>
          <div class="title">Admin Login</div>
          <div class="hint">Admins are created server-side. This page is login-only.</div>
        </div>
        <div class="actions">
          <span class="pill" id="authPill">Not signed in</span>
          <button class="btn danger" id="btnLogout" style="display:none;">Logout</button>
        </div>
      </div>

      <div class="body">
        <div class="grid2">
          <label class="field">
            <span class="lbl">Email</span>
            <input id="loginEmail" type="email" placeholder="admin@jabulss.com" autocomplete="username" />
          </label>

          <label class="field">
            <span class="lbl">Password</span>
            <input id="loginPassword" type="password" placeholder="••••••••" autocomplete="current-password" />
          </label>
        </div>

        <div class="cta">
          <button class="btn primary" id="btnLogin">Login</button>
        </div>
      </div>
    </section>

    <section class="two">
      <!-- UPLOAD -->
      <section class="card" id="uploadCard">
        <div class="head">
          <div>
            <div class="title">Upload New</div>
            <div class="hint">Upload PDF or image. Add metadata. Publish immediately.</div>
          </div>
          <span class="pill warn">Max 35MB</span>
        </div>

        <div class="body">
          <label class="field">
            <span class="lbl">File</span>
            <input id="file" type="file" accept=".pdf,.png,.jpg,.jpeg,.webp,application/pdf,image/*" />
          </label>

          <div style="height:10px"></div>

          <div class="grid2">
            <label class="field">
              <span class="lbl">Course Code</span>
              <input id="course_code" placeholder="e.g. LAW 201" />
            </label>

            <label class="field">
              <span class="lbl">Course Title</span>
              <input id="course_title" placeholder="e.g. Constitutional Law" />
            </label>
          </div>

          <div style="height:10px"></div>

          <label class="field">
            <span class="lbl">Display Title</span>
            <input id="title" placeholder="What users will see" />
          </label>

          <div style="height:10px"></div>

          <div class="grid2">
            <label class="field">
              <span class="lbl">Level</span>
              <select id="level">
                <option value="">—</option>
                <option>100L</option><option>200L</option><option>300L</option><option>400L</option><option>500L</option>
              </select>
            </label>

            <label class="field">
              <span class="lbl">Semester</span>
              <select id="semester">
                <option value="">—</option>
                <option>First</option>
                <option>Second</option>
              </select>
            </label>

            <label class="field">
              <span class="lbl">Type</span>
              <select id="type">
                <option>Exam</option>
                <option>Test</option>
                <option>Quiz</option>
              </select>
            </label>

            <label class="field">
              <span class="lbl">Session</span>
              <input id="session" placeholder="e.g. 2023/2024" />
            </label>
          </div>

          <div style="height:10px"></div>

          <label class="field">
            <span class="lbl">Notes (optional)</span>
            <textarea id="notes" placeholder="Any extra note..."></textarea>
          </label>

          <div style="height:10px"></div>

          <label class="field">
            <span class="lbl">Rename file as (optional)</span>
            <input id="safe_name" placeholder="e.g. law-201-constitutional-law (no extension)" />
            <div class="hint">If empty, the system generates a safe filename automatically.</div>
          </label>

          <div class="cta">
            <button class="btn primary" id="btnUpload">Upload</button>
            <button class="btn" id="btnClearUpload">Clear</button>
          </div>
        </div>
      </section>

      <!-- MANAGE -->
      <section class="card" id="manageCard">
        <div class="head">
          <div>
            <div class="title">Manage Library</div>
            <div class="hint">Search, edit metadata, rename file, or delete.</div>
          </div>
          <span class="pill" id="countPill">0 items</span>
        </div>

        <div class="body">
          <div class="toolbar">
            <div class="left">
              <input id="q" placeholder="Search: title, course, session, notes..." style="width:min(440px,100%);" />
              <select id="fLevel" style="width:140px;">
                <option value="">All Levels</option>
                <option>100L</option><option>200L</option><option>300L</option><option>400L</option><option>500L</option>
              </select>
              <select id="fSemester" style="width:160px;">
                <option value="">All Semesters</option>
                <option>First</option><option>Second</option>
              </select>
              <select id="fType" style="width:140px;">
                <option value="">All Types</option>
                <option>Exam</option><option>Test</option><option>Quiz</option>
              </select>
            </div>

            <div class="right">
              <button class="btn" id="btnRefresh">Refresh</button>
            </div>
          </div>

          <div style="overflow:auto;">
            <table aria-label="Past questions table">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Meta</th>
                  <th>File</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>

          <div class="hint" style="margin-top:10px;">
            Tip: “Rename” changes the actual file name on the server (Truehost) and updates the DB link.
          </div>
        </div>
      </section>
    </section>

    <div class="footer">
      © <span id="year"></span> Law Students’ Society, Joseph Ayo Babalola University.
    </div>

    <!-- EDIT MODAL -->
    <div class="modalOverlay" id="editOverlay" aria-hidden="true">
      <div class="modal" role="dialog" aria-modal="true" aria-label="Edit item">
        <div class="mhead">
          <div class="title">Edit Metadata</div>
          <button class="btn" id="btnEditClose">Close</button>
        </div>
        <div class="mbody">
          <input type="hidden" id="edit_id" />

          <div class="grid2">
            <label class="field">
              <span class="lbl">Course Code</span>
              <input id="edit_course_code" />
            </label>
            <label class="field">
              <span class="lbl">Course Title</span>
              <input id="edit_course_title" />
            </label>
          </div>

          <div style="height:10px"></div>

          <label class="field">
            <span class="lbl">Display Title</span>
            <input id="edit_title" />
          </label>

          <div style="height:10px"></div>

          <div class="grid2">
            <label class="field">
              <span class="lbl">Level</span>
              <select id="edit_level">
                <option value="">—</option>
                <option>100L</option><option>200L</option><option>300L</option><option>400L</option><option>500L</option>
              </select>
            </label>

            <label class="field">
              <span class="lbl">Semester</span>
              <select id="edit_semester">
                <option value="">—</option>
                <option>First</option>
                <option>Second</option>
              </select>
            </label>

            <label class="field">
              <span class="lbl">Type</span>
              <select id="edit_type">
                <option>Exam</option>
                <option>Test</option>
                <option>Quiz</option>
              </select>
            </label>

            <label class="field">
              <span class="lbl">Session</span>
              <input id="edit_session" placeholder="e.g. 2023/2024" />
            </label>
          </div>

          <div style="height:10px"></div>

          <label class="field">
            <span class="lbl">Notes</span>
            <textarea id="edit_notes"></textarea>
          </label>

          <div class="cta">
            <button class="btn primary" id="btnEditSave">Save Changes</button>
          </div>
        </div>
      </div>
    </div>

    <!-- RENAME MODAL -->
    <div class="modalOverlay" id="renameOverlay" aria-hidden="true">
      <div class="modal" role="dialog" aria-modal="true" aria-label="Rename file">
        <div class="mhead">
          <div class="title">Rename File</div>
          <button class="btn" id="btnRenameClose">Close</button>
        </div>
        <div class="mbody">
          <input type="hidden" id="rename_id" />
          <label class="field">
            <span class="lbl">New file base name</span>
            <input id="rename_safe" placeholder="e.g. law-201-constitutional-law" />
            <div class="hint">No extension. We keep the same extension automatically.</div>
          </label>

          <div class="cta">
            <button class="btn primary" id="btnRenameDo">Rename</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="admin.js"></script>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
      const t = document.getElementById("navToggle");
      const links = document.getElementById("navLinks");
      t?.addEventListener("click", () => links.classList.toggle("open"));
    </script>
  </main>
</body>
</html>
